<!--
  Generated template for the ControlePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-row>
      <ion-title>Controle</ion-title>
      <ionic-selectable
      item-content
      [(ngModel)]="localizacao"
      [items]="localizacoes"
      itemValueField="id"
      itemTextField="nome"
      [canSearch]="true"
      [focusSearchbar]="true"
      [hasVirtualScroll]="true" 
      placeholder="Localizações"
      (onChange)="carregaInsumos($event)">
      <ng-template
        ionicSelectableItemTemplate
        let-port="item"
        class="my-center-text">
        <ion-item>
          <ion-label text-wrap class="label_12_b"> {{port.nome}} </ion-label>
        </ion-item>
      </ng-template>
    </ionic-selectable>
    </ion-row>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-grid>
    <ion-row>
      <div >
        <ion-searchbar
          placeholder="Busca pelo nome"
          [showCancelButton]="shouldShowCancel"
          (ionInput)="buscaInsumo($event,'nome')"
          (ionCancel)="onCancel()"
          (ionClear)="onCancel()">
        </ion-searchbar>
      </div>
      <div >
        <ion-searchbar
          placeholder="Busca por cod. almoxarifado"
          [showCancelButton]="shouldShowCancel"
          (ionInput)="buscaInsumo($event,'codalmox')"
          (ionCancel)="onCancel()"
          (ionClear)="onCancel()">
        </ion-searchbar>
      </div>
      <div >
        <ion-searchbar
          placeholder="Busca por Lote LEI"
          [showCancelButton]="shouldShowCancel"
          (ionInput)="buscaInsumo($event,'lotelei')"
          (ionCancel)="onCancel()"
          (ionClear)="onCancel()">
        </ion-searchbar>
      </div>
      <div >
        <ion-searchbar
          placeholder="Busca por Lote LEI Principal"
          [showCancelButton]="shouldShowCancel"
          (ionInput)="buscaInsumo($event,'sublotelei')"
          (ionCancel)="onCancel()"
          (ionClear)="onCancel()">
        </ion-searchbar>
      </div>
    </ion-row>
  </ion-grid>
  <ion-grid>
    <ion-row>
      <ion-col col-md-1 class="card-vermelho" style="display: flex; justify-content: center; align-items: center;"><b>reprovado</b></ion-col>
      <ion-col col-md-1 class="card-amarelo" style="display: flex; justify-content: center; align-items: center;"><b>quarentena</b></ion-col>
      <ion-col col-md-1 class="card-verde" style="display: flex; justify-content: center; align-items: center;"><b>aprovado</b></ion-col>
    </ion-row>   
  </ion-grid>
  <ion-grid>
  <ion-row class="alinha_itens_center">
    <ion-col col-md-1 class="cell-class">
      <b>COD ALMOX:</b>
    </ion-col>
    <ion-col col-md-3 class="cell-class">
      <b>NOME:</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>QTD:</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>LT FORNECEDOR</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>LT LEI</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>APROVADO</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>IRRADIADO</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>RECEBER</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>DT PREVISÃO</b>
    </ion-col>
    <ion-col col-md-1 class="cell-class">
      <b>LIBERAR</b>
    </ion-col>
  </ion-row>
  
    <ion-row *ngFor="let ins of insumosLocalizacao">
      <ion-col col-md-1 class="{{ins.farol}}" style="
        border-color: rgb(131, 125, 125); 
        border-width: .01em; 
        border-style:solid; 
        display: flex; 
        justify-content: center;
        align-items: center;"><b>{{ins.codigoalmoxarifado}}</b></ion-col>
      <ion-col col-md-3 class="cell-class"><b>{{ins.insumo.nome}}</b></ion-col>
      <ion-col col-md-1 class="cell-class">{{ins.quantidade}} {{ins.unidadeEntrada.nome}}</ion-col>
      <ion-col col-md-1 class="cell-class">{{ins.loteFornecedor}}</ion-col>
      <ion-col col-md-1 class="cell-class">{{ins.loteLEI}}</ion-col>
      <ion-col col-md-1 class="cell-class-icon">{{ins.aprovado != null ? ins.aprovado== true ? "SIM":"NÃO":""}}</ion-col>
      <ion-col col-md-1 class="cell-class-icon">{{ins.irradiado}}</ion-col>
      <ion-col col-md-1 class="cell-class-icon">
        <button ion-button icon-only (click)="receberParaControle(ins)">
          <ion-icon ios="ios-cube" md="md-cube"></ion-icon>
        </button>
      </ion-col>
      <ion-col col-md-1 class="cell-class-icon">
        <button ion-button icon-only (click)="alterarPrevisao(ins)">
          {{"&nbsp;"+(ins.dataPrevisaoControle | date:'dd/MM/yyyy')+"&nbsp;"}}
        </button>
      </ion-col>
      <ion-col col-md-1 class="cell-class-icon" >
        <button ion-button icon-only (click)="liberarInsumo(ins)">
          <ion-icon ios="ios-unlock" md="md-unlock"></ion-icon>
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
