<!--
  Generated template for the RastreamentoPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Rastreamento de Insumos</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-item>
    <ion-label>Lotes LEI cadastrados</ion-label>
    <ionic-selectable 
      #localizacoesComponent
      item-content
      [(ngModel)]="insumolocalizacao"
      [items]="insumosLocalizacoes"
      itemValueField="id"
      itemTextField="loteLEI"
      [canSearch]="true"
      [focusSearchbar]="true"
      (onChange)="loteLEIChange($event)"
      [hasVirtualScroll]="true" >
      <ng-template ionicSelectableItemTemplate let-item="item" class="my-center-text">
        <ion-item>
          <ion-label text-wrap class="label_12_b">
            {{item.loteLEI}}
          </ion-label>
        </ion-item>
      </ng-template>
    </ionic-selectable>
  </ion-item>
  <ion-grid [hidden]="insumoEntradaDTO != null ? false : true">
    <ion-row><ion-col><ion-label></ion-label></ion-col></ion-row>
    <ion-row><ion-col><ion-label></ion-label></ion-col></ion-row>
    <ion-row>
      <ion-col col-4 class="cell-class">
       {{insumoEntradaDTO != null?"Data e Hora da entrada: "+insumoEntradaDTO.entrada.dataEntrada:"" }}
      </ion-col>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Localização de entrada: "+insumoEntradaDTO.entrada.localizacao.nome:"" }}
      </ion-col>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Usuário de cadastro: "+insumoEntradaDTO.entrada.usualt:"" }}
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-8 class="cell-class">
       <b>{{insumoEntradaDTO != null?"Insumo: "+insumoEntradaDTO.insumo.nome:"" }}</b>
      </ion-col>
      <ion-col col-4 class="cell-class">
        <b>{{insumoEntradaDTO != null?"Lote LEI: "+insumoEntradaDTO.loteLEI:"" }}</b>
       </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-4 class="cell-class">
       {{insumoEntradaDTO != null?"Lote Fabricante: "+insumoEntradaDTO.loteFornecedor:"" }}
      </ion-col>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Lote CR: "+insumoEntradaDTO.loteCR:"" }}
      </ion-col>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Lote ARM: "+insumoEntradaDTO.loteARM:"" }}
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Data de Fabricação: "+(insumoEntradaDTO.dataFabricacao | date:'dd/MM/yyyy'):" " }}
      </ion-col>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Data de Validade: "+(insumoEntradaDTO.dataValidade | date:'dd/MM/yyyy'):" " }}
      </ion-col>
      <ion-col col-4 class="cell-class">

      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Quantidade recebida: "+insumoEntradaDTO.quantidadeVolume:" " }}
        {{insumoEntradaDTO != null?insumoEntradaDTO.unidadeRecebida.nome+" (s)":" " }} 
      </ion-col>
      <ion-col col-4 class="cell-class">
        {{insumoEntradaDTO != null?"Quantidade de entrada: "+insumoEntradaDTO.quantidade:" " }}
        {{insumoEntradaDTO != null?insumoEntradaDTO.unidadeEntrada.nome+" (s)":"" }}
      </ion-col>
      <ion-col col-4 class="cell-class">

      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid [hidden]="insumoEntradaDTO != null ? false : true">
    <ion-row class="alinha_itens_center"><ion-col ><ion-label class="my-label">Movimentações Realizadas</ion-label></ion-col></ion-row>
    <ion-row>
      <ion-col size="3" class="cell-class">
        De localização:
      </ion-col>
      <ion-col size="1" class="cell-class">
        Quantidade:
      </ion-col>
      <ion-col size="3" class="cell-class">
        Para localização:
      </ion-col>
      <ion-col size="2" class="cell-class">
        Data da movimentação
      </ion-col>
      <ion-col size="3" class="cell-class">
        Usuário que movimentou
      </ion-col>
      <ion-col size="1" class="cell-class">
        Aprovado pelo CQ
      </ion-col>
      <ion-col size="1" class="cell-class">
        Irradiado
      </ion-col>
    </ion-row>
    <ion-row *ngFor="let im of insumosMovimentacoes">
      <ion-col size="3" class="cell-class">
        {{im.localizacaoOrigem.nome}}
      </ion-col>
      <ion-col size="1" class="cell-class">
        {{im.quantidadeRealMovimentada}}
      </ion-col>
      <ion-col size="3" class="cell-class">
        {{im.localizacao.nome}}
      </ion-col>
      <ion-col size="2" class="cell-class">
        {{im.datalt | date:'dd/MM/yyyy HH:mm'}}
      </ion-col>
      <ion-col size="3" class="cell-class">
        {{im.usualt}}
      </ion-col>
      <ion-col size="1" class="cell-class">
        {{ im.aprovado!=null?(im.aprovado?"Sim":"Não"):""}}
      </ion-col>
      <ion-col size="1" class="cell-class">
        {{ im.irradiado!=null?(im.irradiado?"Sim":"Não"):""}}
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
